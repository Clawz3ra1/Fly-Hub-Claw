-- Obter o jogador e o mouse
local player = game.Players.LocalPlayer
local mouse = player:GetMouse()
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local flying = false
local flySpeed = 50  -- Velocidade inicial do voo

-- Criando a ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FlyGui"
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Criando o botão "Ativar Fly"
local flyButton = Instance.new("TextButton")
flyButton.Name = "FlyButton"
flyButton.Size = UDim2.new(0, 200, 0, 50)
flyButton.Position = UDim2.new(0, 20, 0, 20)
flyButton.Text = "Ativar Fly"
flyButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
flyButton.Font = Enum.Font.SourceSans
flyButton.TextSize = 24
flyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
flyButton.Parent = screenGui

-- Criando o Slider para controlar a velocidade do voo
local speedSlider = Instance.new("TextButton")
speedSlider.Name = "SpeedSlider"
speedSlider.Size = UDim2.new(0, 200, 0, 50)
speedSlider.Position = UDim2.new(0, 20, 0, 80)
speedSlider.Text = "Velocidade: 50"
speedSlider.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
speedSlider.Font = Enum.Font.SourceSans
speedSlider.TextSize = 20
speedSlider.TextColor3 = Color3.fromRGB(255, 255, 255)
speedSlider.Parent = screenGui

-- Função para iniciar o voo
local function startFlying()
    if not flying then
        flying = true
        humanoid.PlatformStand = true
        local bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.MaxForce = Vector3.new(10000, 10000, 10000)
        bodyVelocity.Velocity = Vector3.new(0, 0, 0)
        bodyVelocity.Parent = character:WaitForChild("HumanoidRootPart")
        
        while flying do
            bodyVelocity.Velocity = Vector3.new(
                mouse.Hit.p.X - character.HumanoidRootPart.Position.X,
                0,  -- Mantém o voo nivelado
                mouse.Hit.p.Z - character.HumanoidRootPart.Position.Z
            ).Unit * flySpeed
            wait(0.1)
        end
        
        bodyVelocity:Destroy()  -- Remove o bodyVelocity quando o voo for desativado
        humanoid.PlatformStand = false
    end
end

-- Função para parar o voo
local function stopFlying()
    flying = false
end

-- Toggle de voo ao clicar no botão
flyButton.MouseButton1Click:Connect(function()
    if flying then
        stopFlying()
        flyButton.Text = "Ativar Fly"
    else
        startFlying()
        flyButton.Text = "Desativar Fly"
    end
end)

-- Atualiza a velocidade do voo com o slider
speedSlider.MouseButton1Click:Connect(function()
    local newSpeed = math.random(10, 100)  -- Gera um valor aleatório para a velocidade
    flySpeed = newSpeed
    speedSlider.Text = "Velocidade: " .. newSpeed
end)
